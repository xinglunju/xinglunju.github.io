<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
Design by TEMPLATED
http://templated.co
Released for free under the Creative Commons Attribution License

Name       : Green Exposure  
Description: A two-column, fixed-width design with dark color scheme.
Version    : 1.0
Released   : 20130308

-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Software and Code</title>
<!--link href="http://fonts.googleapis.com/css?family=Arvo|Open+Sans:400,300,600,700" rel="stylesheet" type="text/css" /-->
<link href="style.css" rel="stylesheet" type="text/css" media="screen" />
<script src="scripts/jquery-1.11.3.min.js"></script>
<script src="scripts/d3.min.js"></script>
<script src="scripts/backtotop.js"> </script>
<script src="scripts/tracking.js"></script>
<script type='text/javascript' src='scripts/x3dom.js'> </script>
<link rel='stylesheet' type='text/css' href='scripts/x3dom.css'></link>
<style>
	x3d
	{
	border:2px solid darkorange;
	background: #909090;
	}
</style>
</head>
<body>

<div id="wrapper">

<div id="menu-wrapper">
	<div id="menu">
		<ul>
			<li><a href="index.html">Home</a></li>
			<li><a href="research.html">Research</a></li>
			<li class="current_page_item"><a href="#">Software & Code</a></li>
			<li><a href="teaching.html">Teaching & Outreach</a></li>
			<li><a href="links.html">Links</a></li>
		</ul>
	</div>
	<!-- end #menu --> 
</div>

<!--div id="banner"><a href="#"><img src="images/sma_dawn.jpg" width="1200" height="600" alt="" /></a></div-->

<div id="page">
	<div class="post">
		<h1>Javascript Applets</h1>
			<p><a href="jsapplets.html" class="class1">under construction...</a></p>
		<hr>
		</br>
		<h1>Software</h1>
			<p>Some MIR tricks I learned from my collegues: <a href="mir.html" class="class1">MIR tricks</a>.</p>
			<p>Some Miriad tricks: <a href="miriad.html" class="class1">Miriad tricks</a>.</p>
			<p>A simple script to merge single-dish and interferometer data, using the feather task in CASA, adapted from <a href="https://sites.google.com/site/jenskauffmann/research-notes/adding-zero-spa" target="_blank" class="class2">Jens Kauffmann's script</a>: <a href="files/merge.py" class="class1">merge.py</a>.</p>
			<p>Mi casa no es su casa: <a href="casa.html" class="class1">CASA nightmares</a>.</p>
		<hr>
		</br>
		<h1>Code</h1>
			<p>Here are some Python codes I wrote. You can also find them on <a href="https://github.com/xinglunju" class="class2">GitHub</a>.</p>
			<hr class="gradient">
			<h2><a id="TDViz">TDViz: Three-dimensional Datacube Visualizer</a></h2>
				<p><a href="https://github.com/xinglunju/tdviz" target="_blank" class="class2">GitHub link</a></p>
				<p>Related publications: &#8226; <a href="http://adsabs.harvard.edu/abs/2018ApJ...855....9L" target="_blank" class="class2">Lu et al. 2018, ApJ, 855, 9</a>. &#8226; <a href="http://www.astroexplorer.org/search/eyJjb250ZW50VHlwZXMiOlsiSW50ZXJhY3RpdmUgZmlndXJlcyJdLCJwYWdlIjoxLCJzaG93IjoyNX0" target="_blank" class="class2">Interactive figures on the AstroExplorer</a>.</p>
				<p>This code is originally a module prepared for <a href="http://ay201b.wordpress.com/topical-modules/2013-topical-modules/" target="_blank" class="class2">the AY201b course</a> tutored by Prof. Alyssa Goodman at Harvard Astronomy Department (see <a href="ay201b/index.html" target="_blank" class="class1">the module website</a>). It can be run with 'python TDViz.py', as long as you have <a href="#dep" class="class1">all the required python packages</a> installed. A snapshot of the interface is shown below.</p>
				<img src="images/tdviz_sc.png" style="float:center;width:600px;"/>
				<p>You can select your own FITS datacubes. Then the starting and ending pixels of the three axes, and the maximum and minimum values will be updated, respectively. The default scene will be the entire datacube. If you want to focus on a smaller region and/or a narrower velocity range, you can change corresponding values and click the 'Plot' button again. You can also exporting a 3D scene or make a GIF movie.</p>
				<p>Here is an example: a visualizatin of CO (2-1) outflows in IRAS 18308-0841 as observed by the SMA (<a href="http://adsabs.harvard.edu/abs/2018ApJ...855....9L" target="_blank" class="class2">Lu et al. 2018</a>):</p>
				<x3d id='I18308_CO' width='500px' height='500px'>
				<scene>
				<inline url="files/I18308_CO.x3d" nameSpaceName="I18308 CO 2-1" mapDEFToID="true" onclick=''/>
				</scene>
				</x3d>
				<br clear=all>
					<button onclick="document.getElementById('I18308_CO').runtime.resetView();">Reset View</button>
				<br>
				<p>If you find any bugs or have any questions, please do not hesitate to <a title="mailto:xinglv.nju@gmail.com?subject=bugs!!!!" href="mailto:xinglv.nju@gmail.com?subject=bugs!!!!">contact me</a>, thanks!</p>
				<h4><a id="dep">Dependencies</a></h4>
					<p>This code makes use of python modules including MayaVI, TraitsUI, astropy, numpy, and scipy. Normally you can install <a href="http://python4astronomers.github.io/installation/recommended_options.html" target="_blank" class="class2">one of the popular scientific Python packages</a> and have them all. <a href="https://store.continuum.io/cshop/anaconda/" target="_blank" class="class2">The Anaconda package</a> works well for me.</p>
			<hr class="gradient">
			<h2><a id="PyAmor">PyAMOR: Python script for AMmOnia data Reduction</a></h2>
				<p><a href="https://github.com/xinglunju/pyAmor" target="_blank" class="class2">GitHub link</a></p>
				<p>Related publications: &#8226; <a href="http://adsabs.harvard.edu/abs/2015ApJ...805..171L" target="_blank" class="class2">Lu et al. 2015, ApJ, 805, 171</a>. &#8226; <a href="http://adsabs.harvard.edu/abs/2017ApJ...839....1L" target="_blank" class="class2">Lu et al. 2017, ApJ, 839, 1</a>. &#8226; <a href="http://adsabs.harvard.edu/abs/2018ApJ...855....9L" target="_blank" class="class2">Lu et al. 2018, ApJ, 855, 9</a>.</p>
				<p><img src="images/pyamor.png" style="float:center;width:400px;"/>
				</br>
				Figure 6 of <a href="http://adsabs.harvard.edu/abs/2018ApJ...855....9L" target="_blank" class="class2">Lu et al. 2018, ApJ, 855, 9</a>.
				</p>
				<p>This code is dedicated to modeling spectra of low level ammonia transitions (between (J,K)=(1,1) and (5,5)) and deriving parameters including linewidths, column densities, and temperatures under LTE conditions. The curve fitting is implemented by <a href="http://lmfit.github.io/lmfit-py" target="_blank" class="class2">the lmfit package</a>. It is able to fit spectra with up to two velocity components along the line of sight and provide one set of best fitted parameters for each component. For now it can only fit two velocity components in the interative mode, which means you need to manually identify the two velocities and in the case of low S/N ratios the fitting may not converge. When looping through entire maps in the non-interacitve mode, it only fits one velocity component, and if there are more than one component, it will take the highest peak at each pixel to do the fitting.</p>
				<p>What it can do now: For low S/N or low spectral resolution data, use cross-correlation between a model and a regridded spectrum (e.g. 10 times smaller channel width) to find the peak velocity, then fix it and run the minimization process. For high S/N data, it is ok to let the peak velocity be a free parameter.</p>
				<p>What it will be able to do: &#8226; Include all 18 hyperfine components of NH<sub>3</sub> (1,1), so that we can determine the intrinsic linewidth. &#8226; Be able to fit multiple velocity component (semi-)automatically. &#8226; Have an interactive graphic interface.</p>
			<hr class="gradient">
			<h2><a id="emanon">EMANON: Estimate of Methyl cyanide parameters with NON-linear optimization</a></h2>
				<p><a href="https://github.com/xinglunju/emanon" target="_blank" class="class2">GitHub link</a></p>
				<p>Related publications: &#8226; <a href="http://adsabs.harvard.edu/abs/2017ApJ...847...87S" target="_blank" class="class2">Silva et al. 2017, ApJ, 847, 87</a>.</p>
				<p><img src="images/emanon.png" style="float:center;width:400px;"/>
				</br>
				Figure 6 of <a href="http://adsabs.harvard.edu/abs/2017ApJ...847...87S" target="_blank" class="class2">Silva et al. 2017, ApJ, 847, 87</a>.
				</p>
				<p>A code to fit CH<sub>3</sub>CN hyperfine lines and estimate linewidths, temperatures, and column densities, under LTE conditions.</p>
				<p>It is adapted from Roberto Galvan-Madrid's Mathematica code. 'Emanon' is actually 'No name' spelled backwards. I don't know the origin of this word but I learned it in Shinji Kajio's fiction <i>Memories of Emanon</i>... </a>
			<hr class="gradient">
			<h2><a id="fftl">FFTL: Fitting Formaldehyde Triple Lines at &#126;218 GHz</a></h2>
				<p><a href="https://github.com/xinglunju/FFTL" target="_blank" class="class2">GitHub link</a></p>
				<p>Related publications: &#8226; <a href="http://adsabs.harvard.edu/abs/2018MNRAS.474.2373W" target="_blank" class="class2">Walker et al. 2018, MNRAS, 474, 2373</a>.</p>
				<p><img src="images/fftl.png" style="float:center;width:400px;"/>
				</br>
				Figure A2 of <a href="http://adsabs.harvard.edu/abs/2018MNRAS.474.2373W" target="_blank" class="class2">Walker et al. 2018, MNRAS, 474, 2373</a>.
				</p>
				<p>A code to fit the three H<sub>2</sub>CO lines around 218 GHz and estimate linewidths, temperatures, and column densities, under LTE conditions.</p>
			<hr class="gradient">
			<h2>A Dancing Dophin</h2>
				<p>This is the first Python code I wrote back in 2012, when I attended the Practical Python for Astronomers workshop at CfA. You can find it <a href="http://python4astronomers.github.io/contest/bounce.html" target="_blank" class="class2">here</a>.</p>
				<img src="images/dolphin.gif" style="float:center;-moz-transform:scaleY(-1);-webkit-transform:scaleY(-1);-o-transform:scaleY(-1);transform:scaleY(-1);"/>
	</div>
</div>
<!-- end #page --> 

<div id="footer">
	<p>&copy; 2018 Xing Lu. Design by <a href="http://templated.co" rel="nofollow">TEMPLATED</a>.</p>
</div>
<!-- end #footer -->

<a href="#" class="back-to-top" style="display:none;float:right;">Back to Top</a>

</div>
<!-- end #wrapper -->
</body>
</html>
